
## Add Android Project Into Flutter
實際目錄結構如下圖
![structure](https://gordianknot1981.github.io/nxp_note/flutter/flutter_android_structure.png )

### Flutter/Android 專案目錄結構說明

file structure of a flutter project would be look like this
- 📁 FlutterProject
	- 📰 pubspec.yaml 
	- 📁 lib [1]
	- 📁 android [2]
	- 📁 res [3]
>[1]  libraries written in dart.
[2]  an android project wrapper for flutter, which contains following structure
> - 📁 app
	- 📰 build.gradle
	- 📰 local.properties 
>- 📁 res
>- 📁 assets
>- 📰 build.gradle
>- 📰 settings.gradle
>
>[3] android resource folder for flutter project,  generated by flutter.

### 說明Android Project wrapper for flutter
#### android project wrapper for flutter
- 📁 app[^1]
	- 📁 libs
	- 📁 src
	- 📰 build.gradle [^2]
- 📁 res[^4]
- 📁 assets[^5]
- 📰 build.gradle[^6]
- 📰 settings.gradle[^7]
- 📰 local.properties [^8]

**[1] app** your existing android project 
 #### 現有的android project
 需將其folder改名為app，app似乎為flutter默認的android專案名稱，以告知flutter專案設定的位置(build.gradle, settings.gradle)，如果不用默認的名稱似乎也可以，但需要設定project.name及include name，後文會寫到。

android project folder, this would be your existing android project renamed to "app".  "app" seems like a default naming convention for flutter to indicate project entry folder where configurations(build.gradle and local.properties) locates. For not using convention name, you need to setup project name and include name in build.gradle, which will refer later on.
 
 
**[2] build.gradle** 現有專案設定檔, build setup for existing android project
若要將現有專案與flutter連結,需在該設定檔中寫入以下資訊
- 載入local.properties
- flutterRoot 
- flutterProject
- apply pluginId **&** apply from
- sourceSets
- applicationId
- dependencies

> #### local.properties
> indicates where flutter.sdk and android.sdk locate.
```groovy
	def localProperties = new Properties()  
	def localPropertiesFile = rootProject.file('local.properties')  
	if (localPropertiesFile.exists()) {  
	    localPropertiesFile.withReader('UTF-8') { reader ->  
	        localProperties.load(reader)  
	    }  
	}
```
> 主要記錄了flutter.sdk及android.sdk的位置, 介由讀取 local.properties 以注入flutter
> - rootProject 指向 android , 
> - localPropertiesFile  指向 android/local.properties

> #### flutterRoot
> read flutter sdk from local.properties into flutterRoot
```groovy
def flutterRoot = localProperties.getProperty('flutter.sdk')  
if (flutterRoot == null) {  
    throw new GradleException("Flutter SDK not found. Define location with flutter.sdk in the local.properties file.")  
}
```

> #### flutterProject
> specify where flutterProject locates, default value are "../.."
```groovy
def flutterProject = '../..'
flutter {  
    source flutterProject  
}
```

> #### apply plugin | apply from
> apply plugin pluginId implmented the plugin
> - apply plugin: pluginId
> - apply from: local or remote build script
```groovy
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE4ODk0NDQ0NjAsMTQ2MDMwODA1NCwxNT
YxMDIyMzI5LDgwMTI0MzI0NiwtMzY0NjgwMzIxLC0xOTM2NDc5
MjU1LC0xNzc0Njk2ODgyXX0=
-->